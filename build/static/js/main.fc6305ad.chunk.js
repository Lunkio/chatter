(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){e.exports=n(178)},123:function(e,t,n){},174:function(e,t){},178:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(12),o=n.n(i),u=(n(123),n(5)),l=n.n(u),s=n(8),m=n(230),p=n(21),d=n(33),f=n(10),v=n(20),b=n.n(v),g={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},h=[],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},y=function(e){return function(t){window.localStorage.setItem("loggedUser",JSON.stringify(e)),t({type:"LOGIN_USER",data:e})}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return t.data;case"LOGOUT_USER":return null;default:return e}},x=n(41),O=null,j={setToken:function(e){O="bearer ".concat(e)},getAllBlogs:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addBlog:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/blogs",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editBlog:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat("/api/blogs","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeBlog:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,b.a.delete("".concat("/api/blogs","/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=[],S=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.addBlog(e);case 2:a=t.sent,n({type:"ADD_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.editBlog(e);case 2:a=t.sent,n({type:"EDIT_BLOG",data:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.removeBlog(e);case 2:n({type:"REMOVE_BLOG",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"ADD_BLOG":return[].concat(Object(x.a)(e),[t.data]);case"EDIT_BLOG":var n=t.data,a=t.data.id;return e.map((function(e){return e.id!==a?e:n}));case"REMOVE_BLOG":return e.filter((function(e){return e.id!==t.data.id}));default:return e}},B=n(18),I=n(179),_=n(61),A=n(232),L=n(216),D=n(217),W=n(215),F=n(218),U=n(219),G=n(238),z=n(220),M=n(236),R=n(211),H=n(237),P=Object(R.a)((function(e){return Object(H.a)({primaryLight:{color:e.palette.primary.light},primaryDark:{color:e.palette.primary.dark},secondaryLight:{color:e.palette.secondary.light},secondaryDark:{color:e.palette.secondary.dark},flex:{display:"flex"},textField:{marginBottom:"1rem"},menuButton:{padding:"1.23rem",color:e.palette.primary.light,marginLeft:"0.5rem"},logoutButton:{padding:"1.23rem",color:e.palette.primary.light,marginLeft:"0.5rem"},link:{textDecoration:"none",color:"white"},navBarText:{fontSize:"0.7rem",fontStyle:"italic",color:e.palette.secondary.light},table:{fontFamily:"Solway"},tableHead:{backgroundColor:e.palette.primary.light},tableLink:{textDecoration:"none",fontWeight:"bold",color:"primary"},singleBlog:{marginTop:"1rem",marginBottom:"1rem",padding:"0.5rem"},topicsContainer:{padding:"2rem"},removeBtn:{color:"#D32F2F"},topicsWindow:{width:"30%",height:"20rem",overflow:"auto",borderRight:"1px solid grey"},chatWindow:{width:"70%",height:"20rem",overflow:"auto"},topicManagement:{display:"flex",justifyContent:"space-between"},addTopic:{display:"flex",alignItems:"center",width:"30%"},topicInfo:{width:"70%",display:"flex",justifyContent:"space-between",alignItems:"center"},chatFieldAndButton:{display:"flex",alignItems:"center",justifyContent:"space-around",marginTop:"1rem"},textInput:{width:"80%"},chatUserColor:{color:e.palette.primary.light},chatMessage:{display:"flex",alignItems:"center",margin:"0.5rem",marginBottom:"1rem"},chatMessageUser:{display:"flex",alignItems:"center",margin:"0.5rem",marginBottom:"1rem",flexDirection:"row-reverse",textAlign:"right"}})})),V={open:!1,severity:void 0,text:""},J=function(e){return function(t){t({type:"SET_MESSAGE",data:e})}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":case"CLOSE_MESSAGE":return t.data;default:return e}},K=[],Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_CHATS":return t.data;case"ADD_CHAT":return[].concat(Object(x.a)(e),[t.data]);default:return e}},X=n(107),Y=n.n(X),Z=function(){var e=P(),t=Object(f.b)(),n=Object(f.c)((function(e){return e.login})),i=Object(f.c)((function(e){return e.topics})),o=Object(f.c)((function(e){return e.chats})),u=Object(f.c)((function(e){return e.users})),m=Object(r.useState)(""),p=Object(B.a)(m,2),d=p[0],v=p[1],b=Object(r.useState)(""),g=Object(B.a)(b,2),h=g[0],E=g[1],y=Object(r.useState)("Choose a topic"),w=Object(B.a)(y,2),x=w[0],O=w[1],j=Object(r.useState)(""),k=Object(B.a)(j,2),S=k[0],T=k[1],C=Object(r.useState)(void 0),N=Object(B.a)(C,2),R=N[0],H=N[1],V=Object(r.useRef)(null);Object(r.useEffect)((function(){V.current&&V.current.scrollIntoView({behavior:"smooth"})}),[o,R]),a||((a=Y()(":3001")).on("chat message",(function(e){var n;t((n=e,function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"ADD_CHAT",data:n});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),a.on("topic",(function(e){t(ae(e))})));var q={display:"none"},K={visibility:"hidden"};R&&(q={display:R.user_id===n.id?"":"none"},K={visibility:"visible"});var Q=function(e){O(e.name),T(e.id),H(e)},X=function(){var e=Object(s.a)(l.a.mark((function e(a){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,""!==d){e.next=5;break}return t(J({open:!0,severity:"warning",text:"Topic cannot be empty"})),e.abrupt("return");case 5:return r={name:d,user_id:n.id},e.next=9,te.addNewTopic(r);case 9:c=e.sent,t(J({open:!0,severity:"success",text:"New topic was added"})),v(""),Q(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t(J({open:!0,severity:"error",text:"Something went wrong, please try again"}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,""!==h){e.next=4;break}return e.abrupt("return");case 4:return r={message:h,user_id:n.id,topic_id:S},e.next=7,te.addNewChatMessage(r);case 7:E(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(J({open:!0,severity:"error",text:"Something went wrong, please try again"}));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(s.a)(l.a.mark((function e(a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=a.find((function(e){return e.id===S}))){e.next=4;break}return e.abrupt("return");case 4:return te.setToken(n.token),e.next=7,t(re(r.id));case 7:t(J({open:!0,severity:"success",text:"Topic removed succesfully"})),O("Choose a topic"),T(""),H(void 0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(J({open:!0,severity:"error",text:"Something went wrong, please try again"}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){return!!R&&e.id===R.id},ne=function(){return""===S},ce=function(t){return t.id===n.id?e.chatMessageUser:e.chatMessage},ie=function(e){return e.id===n.id?"primary":"secondary"};return c.a.createElement(I.a,{elevation:3,className:e.topicsContainer},c.a.createElement(_.a,{variant:"h4",align:"center"},x),c.a.createElement("hr",null),c.a.createElement("form",{onSubmit:X,className:e.topicManagement},c.a.createElement("div",{className:e.addTopic},c.a.createElement(A.a,{fullWidth:!0,variant:"outlined",placeholder:"Add new topic",type:"text",size:"small",value:d,onChange:function(e){return v(e.target.value)}}),c.a.createElement(L.a,{type:"submit",color:"primary"},c.a.createElement(M.a,{fontSize:"inherit"}))),c.a.createElement("div",{className:e.topicInfo},c.a.createElement("div",{style:K},c.a.createElement("p",{style:{marginLeft:"1rem",fontSize:"0.8rem"}},"added by: ",function(){if(R){var e=u.find((function(e){return e.id===R.user_id}));if(e)return e.username}}())),c.a.createElement("div",{style:q},c.a.createElement(D.a,{className:e.removeBtn,size:"small",onClick:function(){return $(i)}},"Remove Topic")))),c.a.createElement("div",{className:e.flex},c.a.createElement("div",{className:e.topicsWindow},c.a.createElement(W.a,{component:"nav"},i.map((function(e){return c.a.createElement(F.a,{selected:ee(e),button:!0,key:e.id,onClick:function(){return Q(e)}},c.a.createElement(U.a,{primary:e.name}))})))),c.a.createElement("div",{className:e.chatWindow},o.filter((function(e){return e.topic_id===S})).map((function(e){var t=u.find((function(t){return t.id===e.user_id}));return t?c.a.createElement("div",{className:ce(t),key:e.id},c.a.createElement(G.a,{color:ie(t),label:t.username}),c.a.createElement("span",{style:{marginLeft:"0.3rem",marginRight:"0.3rem"}},e.message)):c.a.createElement("div",{key:e.id},"Error")})),c.a.createElement("div",{ref:V}))),c.a.createElement("form",{onSubmit:Z,className:e.chatFieldAndButton},c.a.createElement("div",{className:e.textInput},c.a.createElement(A.a,{fullWidth:!0,disabled:ne(),placeholder:"Type a message",type:"text",size:"small",value:h,onChange:function(e){return E(e.target.value)}})),c.a.createElement("div",null,c.a.createElement(D.a,{type:"submit",variant:"outlined",color:"primary",disabled:ne(),endIcon:c.a.createElement(z.a,null,"send")},"Send"))))},$=function(e){a.emit("topic",e)},ee=null,te={setToken:function(e){ee="bearer ".concat(e)},getAllChats:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat("/api/topics","/chats"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNewChatMessage:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat("/api/topics","/chats"),t);case 2:n=e.sent,r=n.data,a.emit("chat message",r);case 4:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllTopics:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/topics");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNewTopic:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/topics",t);case 2:return n=e.sent,$(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeTopicAndChats:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:ee}},e.next=3,b.a.delete("".concat("/api/topics","/").concat(t),n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ne=[],ae=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"NEW_TOPIC",data:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(e){return function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.removeTopicAndChats(e);case 2:n({type:"REMOVE_TOPIC",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_TOPICS":return t.data;case"NEW_TOPIC":return[].concat(Object(x.a)(e),[t.data]);case"REMOVE_TOPIC":return e.filter((function(e){return e.id!==t.data}));default:return e}},ie={login:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe=function(){var e=P(),t=Object(f.b)(),n=Object(r.useState)(""),a=Object(B.a)(n,2),i=a[0],o=a[1],u=Object(r.useState)(""),m=Object(B.a)(u,2),p=m[0],d=m[1],v=function(){var e=Object(s.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,ie.login({username:i,password:p});case 4:(a=e.sent)&&(j.setToken(a.token),te.setToken(a.token)),o(""),d(""),t(J({open:!0,severity:"success",text:"Welcome ".concat(null===a||void 0===a?void 0:a.name)})),t(y(a)),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),t(J({open:!0,severity:"error",text:"Wrong username or password"})),console.log("error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h1",null,"Log in to application")),c.a.createElement("form",{onSubmit:v},c.a.createElement(A.a,{className:e.textField,fullWidth:!0,variant:"outlined",type:"text",label:"Username",value:i,onChange:function(e){return o(e.target.value)},size:"small"}),c.a.createElement(A.a,{className:e.textField,fullWidth:!0,variant:"outlined",type:"password",label:"Password",value:p,onChange:function(e){return d(e.target.value)},size:"small"}),c.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary"},"Log in")))},ue=n(221),le=n(222),se=n(223),me=n(224),pe=n(225),de=n(226),fe=function(){var e=P(),t=Object(f.c)((function(e){return e.users})),n=Object(f.c)((function(e){return e.blogs}));return c.a.createElement("div",{style:{marginTop:"2rem"}},c.a.createElement(ue.a,{component:I.a,className:e.table},c.a.createElement(le.a,null,c.a.createElement(se.a,{className:e.tableHead},c.a.createElement(me.a,null,c.a.createElement(pe.a,null,"Users"),c.a.createElement(pe.a,null,"Topics created"))),c.a.createElement(de.a,null,t.map((function(t){return c.a.createElement(me.a,{key:t.id},c.a.createElement(pe.a,null,c.a.createElement(p.b,{className:e.tableLink,to:"/users/".concat(t.id)},t.username)),c.a.createElement(pe.a,null,function(e){return n.filter((function(t){return t.user_id===e.id})).length}(t)))}))))))},ve=n(235),be=n(233),ge=function(e){return c.a.createElement(be.a,Object.assign({elevation:6,variant:"filled"},e))},he=function(){var e=Object(f.b)(),t=Object(f.c)((function(e){return e.message})),n=function(t,n){"clickaway"!==n&&e((function(e){e({type:"CLOSE_MESSAGE",data:{open:!1,severity:void 0,text:""}})}))};return c.a.createElement("div",null,c.a.createElement(ve.a,{open:t.open,autoHideDuration:6e3,onClose:n},c.a.createElement(ge,{onClose:n,severity:t.severity},t.text)))},Ee=n(227),ye=n(228),we=n(229),xe=function(){var e=Object(f.b)(),t=P(),n=Object(f.c)((function(e){return e.login}));return c.a.createElement("div",null,c.a.createElement(Ee.a,{position:"fixed"},c.a.createElement(ye.a,null,c.a.createElement(we.a,{container:!0,justify:"space-between"},c.a.createElement(we.a,{item:!0},c.a.createElement(D.a,{component:p.b,to:"/",className:t.menuButton},"Home"),c.a.createElement(D.a,{component:p.b,to:"/topics",className:t.menuButton},"Topics"),c.a.createElement(D.a,{component:p.b,to:"/blogs",className:t.menuButton},"Blogs"),c.a.createElement(D.a,{component:p.b,to:"/users",className:t.menuButton},"Users")),c.a.createElement(we.a,{item:!0},c.a.createElement("span",{className:t.navBarText},"Logged in as ",n.username),c.a.createElement(D.a,{onClick:function(){return e((function(e){window.localStorage.removeItem("loggedUser"),e({type:"LOGOUT_USER"})}))},className:t.logoutButton},"Logout"))))))},Oe=function(){return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h1",null,"Welcome to Chatter!"),c.a.createElement("p",null,"Here you can add your own blogs, start topics and discussions, or read other people's topics and blog posts.")))},je=function(){var e=Object(f.b)(),t=P(),n=Object(f.c)((function(e){return e.blogs})),a=Object(f.c)((function(e){return e.users})),i=Object(f.c)((function(e){return e.login})),o=Object(r.useState)(""),u=Object(B.a)(o,2),d=u[0],v=u[1],b=Object(r.useState)(""),g=Object(B.a)(b,2),h=g[0],E=g[1],y=Object(r.useState)(""),w=Object(B.a)(y,2),x=w[0],O=w[1],j=Object(r.useState)(!0),k=Object(B.a)(j,2),T=k[0],C=k[1],N=Object(r.useState)(!1),_=Object(B.a)(N,2),L=_[0],W=_[1],F=function(){var t=Object(s.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),t.prev=1,""!==d&&""!==h){t.next=5;break}return e(J({open:!0,severity:"warning",text:"Blog needs both author and title details"})),t.abrupt("return");case 5:return a={title:d,author:h,url:x,likes:0,comments:[],user_id:i.id},t.next=9,e(S(a));case 9:e(J({open:!0,severity:"success",text:"Blog added succesfully!"})),v(""),E(""),O(""),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log("error",t.t0),e(J({open:!0,severity:"error",text:"Something went wrong, please try again"}));case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),U={display:T?"":"none",marginTop:"2rem"},G={display:L?"":"none",marginTop:"6rem"};return c.a.createElement("div",null,c.a.createElement(m.a,{maxWidth:"md",style:G},c.a.createElement("div",null,c.a.createElement("h2",null,"Create a new blog")),c.a.createElement("form",{onSubmit:F},c.a.createElement(A.a,{className:t.textField,fullWidth:!0,variant:"outlined",type:"text",label:"Title",value:d,onChange:function(e){return v(e.target.value)},size:"small"}),c.a.createElement(A.a,{className:t.textField,fullWidth:!0,variant:"outlined",type:"text",label:"Author",value:h,onChange:function(e){return E(e.target.value)},size:"small"}),c.a.createElement(A.a,{className:t.textField,fullWidth:!0,variant:"outlined",type:"text",label:"Url",value:x,onChange:function(e){return O(e.target.value)},size:"small"}),c.a.createElement(we.a,{container:!0,justify:"space-between"},c.a.createElement(we.a,{item:!0},c.a.createElement(D.a,{type:"submit",variant:"contained",color:"primary"},"Add new blog")),c.a.createElement(we.a,{item:!0},c.a.createElement(D.a,{variant:"outlined",className:t.removeBtn,onClick:function(){C(!0),W(!1)}},"Close"))))),0===n.length&&c.a.createElement("h2",null,"There are currently no blogs added..."),n.length>0&&c.a.createElement(ue.a,{component:I.a,className:t.table,style:{marginTop:"2rem"}},c.a.createElement(le.a,null,c.a.createElement(se.a,{className:t.tableHead},c.a.createElement(me.a,null,c.a.createElement(pe.a,null,"Title"),c.a.createElement(pe.a,null,"Author"),c.a.createElement(pe.a,null,"Added by"))),c.a.createElement(de.a,null,n.map((function(e){return c.a.createElement(me.a,{key:e.id},c.a.createElement(pe.a,null,c.a.createElement(p.b,{className:t.tableLink,to:"/blogs/".concat(e.id)},e.title)),c.a.createElement(pe.a,null,e.author),c.a.createElement(pe.a,null,function(e){var t=a.find((function(t){return t.id===e}));return null===t||void 0===t?void 0:t.username}(e.user_id)))}))))),c.a.createElement("div",{style:U},c.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){C(!1),W(!0)}},"Create new blog")))},ke=function(){var e=Object(f.b)(),t=Object(d.e)(),n=P(),a=Object(d.f)().id,i=Object(f.c)((function(e){return e.blogs})),o=Object(f.c)((function(e){return e.users})),u=Object(f.c)((function(e){return e.login})),m=Object(r.useState)(""),p=Object(B.a)(m,2),v=p[0],b=p[1],g=i.find((function(e){return e.id===a}));if(!g)return c.a.createElement("div",null,c.a.createElement("h2",null,"Blog was not found"));var h=void 0,E=o.find((function(e){return e.id===g.user_id}));E&&(h=E.username);var y=function(){var n=Object(s.a)(l.a.mark((function n(a){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j.setToken(u.token),n.next=4,e(C(a));case 4:e(J({open:!0,severity:"info",text:"Blog was removed"})),t.push("/blogs"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e(J({open:!0,severity:"error",text:"Something went wrong, please try again"}));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),w=function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""!==v){t.next=4;break}return e(J({open:!0,severity:"warning",text:"Comment cannot be empty"})),t.abrupt("return");case 4:return t.prev=5,g.comments=g.comments.concat(v),t.next=9,e(T(g));case 9:b(""),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(J({open:!0,severity:"warning",text:"Something went wrong, please try again"}));case 15:case 16:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(s.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.likes=n.likes+1,t.next=4,e(T(n));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e(J({open:!0,severity:"warning",text:"Something went wrong, please try again"}));case 9:case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),O={display:u.id===g.user_id?"":"none"};return c.a.createElement(c.a.Fragment,null,c.a.createElement(we.a,{container:!0,justify:"space-between"},c.a.createElement(we.a,{item:!0},c.a.createElement(D.a,{color:"default",variant:"outlined",onClick:function(){return t.push("/")}},"Go Back")),c.a.createElement(we.a,{item:!0,style:O},c.a.createElement(D.a,{className:n.removeBtn,variant:"outlined",onClick:function(){return y(g)}},"Remove blog"))),c.a.createElement("div",null,c.a.createElement(I.a,{elevation:3,className:n.singleBlog},c.a.createElement("h2",null,c.a.createElement("span",{style:{fontSize:"0.9rem"}},"title: "),g.title),c.a.createElement("h2",null,c.a.createElement("span",{style:{fontSize:"0.9rem"}},"author: "),g.author),c.a.createElement("p",null,c.a.createElement("i",null,g.url)),c.a.createElement(we.a,{container:!0,justify:"space-between"},c.a.createElement(we.a,{item:!0},c.a.createElement("p",null,"Comments: ",g.comments.length)),c.a.createElement(we.a,{item:!0},c.a.createElement("p",null,"Likes: ",c.a.createElement("span",null,g.likes))))),c.a.createElement(we.a,{container:!0,justify:"space-between",style:{marginTop:"-0.5rem"}},c.a.createElement(we.a,{item:!0,style:{marginTop:"-1.5rem"}},c.a.createElement("h6",null,"added by: ",c.a.createElement("span",null,h))),c.a.createElement(we.a,{item:!0},c.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return x(g)}},"Like"))),c.a.createElement("div",null,c.a.createElement("h4",null,"Comments"),c.a.createElement("form",{onSubmit:w},c.a.createElement(A.a,{className:n.textField,fullWidth:!0,variant:"outlined",size:"small",label:"Write a comment",type:"text",value:v,onChange:function(e){return b(e.target.value)}}),c.a.createElement(D.a,{type:"submit",variant:"outlined",color:"primary"},"Add Comment")),c.a.createElement("ul",null,g.comments.map((function(e,t){return c.a.createElement("li",{key:t},e)}))))))},Se=function(){var e=Object(d.f)().id,t=Object(d.e)(),n=P(),a=Object(f.c)((function(e){return e.users})),r=Object(f.c)((function(e){return e.blogs})),i=a.find((function(t){return t.id===e}));if(!i)return c.a.createElement("div",null,c.a.createElement("h2",null,"User was not found"));var o=r.filter((function(e){return e.user_id===i.id}));return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(D.a,{color:"default",variant:"outlined",onClick:function(){return t.push("/users")}},"Go Back")),c.a.createElement("div",null,c.a.createElement("h1",null,i.username),c.a.createElement("h4",null,"Added blogs:"),0===o.length&&c.a.createElement("p",null,c.a.createElement("i",null,"No added blogs...")),o.length>0&&c.a.createElement("ul",null,o.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(p.b,{className:n.tableLink,to:"/blogs/".concat(e.id)},e.title))})))))},Te=function(){var e=Object(f.c)((function(e){return e.login})),t=Object(f.b)();return Object(r.useEffect)((function(){(function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAll();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.next=4,t(function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAllBlogs();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.next=6,t(function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.getAllTopics();case 2:n=e.sent,t({type:"INIT_TOPICS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return e.next=8,t(function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.getAllChats();case 2:n=e.sent,t({type:"INIT_CHATS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:t((function(e){var t=window.localStorage.getItem("loggedUser");t&&e({type:"LOGIN_USER",data:JSON.parse(t)})}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),c.a.createElement(c.a.Fragment,null,!e&&c.a.createElement(m.a,{maxWidth:"md"},c.a.createElement(oe,null)),e&&c.a.createElement(m.a,{maxWidth:"lg",style:{marginTop:"7rem"}},c.a.createElement(p.a,null,c.a.createElement(xe,null),c.a.createElement("div",{style:{marginTop:"5rem"}},c.a.createElement(d.a,{exact:!0,path:"/",render:function(){return c.a.createElement(Oe,null)}}),c.a.createElement(d.a,{exact:!0,path:"/topics",render:function(){return c.a.createElement(Z,null)}}),c.a.createElement(d.a,{exact:!0,path:"/blogs",render:function(){return c.a.createElement(je,null)}}),c.a.createElement(d.a,{path:"/blogs/:id",render:function(){return c.a.createElement(ke,null)}}),c.a.createElement(d.a,{exact:!0,path:"/users",render:function(){return c.a.createElement(fe,null)}}),c.a.createElement(d.a,{path:"/users/:id",render:function(){return c.a.createElement(Se,null)}})))),c.a.createElement(he,null))},Ce=n(42),Ne=n(109),Be=Object(Ce.c)({login:w,users:E,message:q,topics:ce,blogs:N,chats:Q}),Ie=Object(Ce.d)(Be,Object(Ce.a)(Ne.a)),_e=n(231),Ae=n(110),Le=Object(Ae.a)({typography:{fontFamily:["Solway","serif"].join(","),button:{textTransform:"none"}},palette:{primary:{main:"#05386B",light:"#EDF5E1"},secondary:{main:"#5CDB95",light:"#8EE4AF",dark:"#379683"},error:{main:"#F44336",dark:"#D32F2F",light:"#E57373"}}});o.a.render(c.a.createElement(f.a,{store:Ie},c.a.createElement(_e.a,{theme:Le},c.a.createElement(Te,null))),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.fc6305ad.chunk.js.map